<%- include('../partials/header.ejs', { pageTitle: pageTitle }) %>

<main class="container py-5">
    <h1 class="page-header"><%= pageTitle %></h1>

    <form class="d-flex mb-4">
        <input class="form-control me-2" type="search" placeholder="Search by title or author..." aria-label="Search" name="q" value="<%= locals.searchQuery || '' %>">
        <button class="btn btn-outline-primary" type="submit">Search</button>
    </form>

    <% if (books && books.length > 0) { %>
        <div class="book-list">
            <% books.forEach(book => { %>
                <div class="book-card">
                    <a href="/books/<%= book.book_id %>">
                        <img src="<%= book.image_url || '/images/default.jpg' %>" alt="<%= book.title %>" class="book-image">
                    </a>
                    <h3 class="h6 text-truncate mb-1"><a href="/books/<%= book.book_id %>" class="text-decoration-none text-dark"><%= book.title %></a></h3>
                    <p class="text-muted small"><%= book.author %></p>
                    <p class="fw-bold">Ksh <%= book.price %></p>
                    <a href="/books/<%= book.book_id %>" class="btn btn-sm btn-primary">View Details</a>
                </div>
            <% }); %>
        </div>
        
        <nav class="mt-5" aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">Next</a></li>
            </ul>
        </nav>

    <% } else { %>
        <div class="alert alert-warning text-center" role="alert">
            <h4 class="alert-heading">No Books Found!</h4>
            <p>We couldn't find any results matching your criteria. Try adjusting your search or browsing all categories.</p>
            <a href="/books" class="btn btn-outline-primary">Browse Full Catalog</a>
        </div>
    <% } %>
</main>

<%- include('../partials/footer.ejs') %>