<%- include('../../../partials/header.ejs', { pageTitle: pageTitle }) %>

<main class="container admin-content">
    <h1 class="page-header"><%= isEdit ? 'Edit Book' : 'Add New Book' %></h1>
    <a href="/admin/books" class="btn btn-secondary">‚Üê Back to Book List</a>

    <% if (error) { %>
        <div class="alert alert-danger"><%= error %></div>
    <% } %>

    <form class="book-form" method="POST" action="/admin/books/<%= isEdit ? 'edit/' + book.book_id : 'add' %>">
        
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="<%= book ? book.title : '' %>" required>
        </div>

        <div class="form-group">
            <label for="author">Author:</label>
            <input type="text" id="author" name="author" value="<%= book ? book.author : '' %>" required>
        </div>

        <div class="form-group">
            <label for="isbn">ISBN:</label>
            <input type="text" id="isbn" name="isbn" value="<%= book ? book.isbn : '' %>">
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="5" required><%= book ? book.description : '' %></textarea>
        </div>

        <div class="form-row">
            <div class="form-group price-group">
                <label for="price">Price (Ksh):</label>
                <input type="number" id="price" name="price" step="0.01" min="0" value="<%= book ? book.price : '' %>" required>
            </div>

            <div class="form-group stock-group">
                <label for="stock_quantity">Stock Quantity:</label>
                <input type="number" id="stock_quantity" name="stock_quantity" min="0" value="<%= book ? book.stock_quantity : '' %>" required>
            </div>
        </div>

        <div class="form-group">
            <label for="image_url">Image URL:</label>
            <input type="text" id="image_url" name="image_url" value="<%= book ? book.image_url : '' %>">
        </div>

        <div class="form-group checkbox-group">
            <input type="checkbox" id="is_active" name="is_active" <%= !book || book.is_active ? 'checked' : '' %>>
            <label for="is_active">Active (Available for Sale)</label>
        </div>
        
        <button type="submit" class="btn btn-cta"><%= isEdit ? 'Save Changes' : 'Add Book' %></button>
    </form>
</main>

<%- include('../../../partials/footer.ejs') %>