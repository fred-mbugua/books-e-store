<%- include('../partials/header.ejs', { pageTitle: pageTitle || 'Error' }) %>

<main class="container py-5 text-center">
    <div class="card p-5 mx-auto shadow-lg" style="max-width: 700px; border-top: 5px solid #dc3545;">
        
        <h1 class="display-1 fw-bold text-danger mb-3">
            <%= errorCode || 'Oops!' %>
        </h1>

        <% 
            let title = 'Something went wrong.';
            if (errorCode === 404) {
                title = 'Page Not Found';
            } else if (errorCode === 401) {
                title = 'Unauthorized Access';
            } else if (errorCode >= 500) {
                title = 'Internal Server Error';
            }
        %>
        
        <h2 class="mb-4 text-secondary"><%= title %></h2>
        
        <p class="lead mb-4">
            <%= errorMessage || 'We encountered an unexpected issue while processing your request. Please try again later.' %>
        </p>

        <hr class="my-4">

        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            <a href="/" class="btn btn-primary btn-lg px-4 gap-3">
                <i class="fas fa-home me-2"></i> Go to Homepage
            </a>
            
            <% if (errorCode === 404) { %>
                <a href="/books" class="btn btn-outline-secondary btn-lg px-4">
                    Explore Catalog
                </a>
            <% } else if (!isAuthenticated && (errorCode === 401 || errorCode === 404)) { %>
                <a href="/auth/login" class="btn btn-outline-secondary btn-lg px-4">
                    Log In
                </a>
            <% } else if (isAuthenticated && (errorCode === 401 || errorCode === 500)) { %>
                <a href="/profile" class="btn btn-outline-secondary btn-lg px-4">
                    My Profile
                </a>
            <% } %>

        </div>
        
    </div>
</main>

<%- include('../partials/footer.ejs') %>